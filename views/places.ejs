<%- include('partials/header') %>

<div class="box">
  <div class="movie-container col-lg-6">
    <ul class="showcase">
      <li>
        <div class="seat"></div>
        <small>N/A</small>
      </li>
      <li>
        <div class="seat selected"></div>
        <small>Selected</small>
      </li>
      <li>
        <div class="seat occupied"></div>
        <small>Occupied</small>
      </li>
    </ul>

    <div class="container">
      <div class="screen"></div>

      <div class="row">
        <div id="1" class="seat"></div>
        <div id="2" class="seat"></div>
        <div id="3" class="seat"></div>
        <div id="4" class="seat"></div>
        <div id="5" class="seat"></div>
        <div id="6" class="seat"></div>
        <div id="7" class="seat"></div>
        <div id="8" class="seat"></div>
      </div>
      <div class="row">
        <div id="9" class="seat"></div>
        <div id="10" class="seat"></div>
        <div id="11" class="seat"></div>
        <div id="12" class="seat occupied"></div>
        <div id="13" class="seat occupied"></div>
        <div id="14" class="seat"></div>
        <div id="15" class="seat"></div>
        <div id="16" class="seat"></div>
      </div>
      <div class="row">
        <div id="17" class="seat"></div>
        <div id="18" class="seat"></div>
        <div id="19" class="seat"></div>
        <div id="20" class="seat"></div>
        <div id="21" class="seat"></div>
        <div id="22" class="seat"></div>
        <div id="23" class="seat occupied"></div>
        <div id="24" class="seat occupied"></div>
      </div>
      <div class="row">
        <div id="25" class="seat"></div>
        <div id="26" class="seat"></div>
        <div id="27" class="seat"></div>
        <div id="28" class="seat"></div>
        <div id="29" class="seat"></div>
        <div id="30" class="seat"></div>
        <div id="31" class="seat"></div>
        <div id="32" class="seat"></div>
      </div>
      <div class="row">
        <div id="33" class="seat"></div>
        <div id="34" class="seat"></div>
        <div id="35" class="seat"></div>
        <div id="36" class="seat occupied"></div>
        <div id="37" class="seat occupied"></div>
        <div id="38" class="seat"></div>
        <div id="39" class="seat"></div>
        <div id="40" class="seat"></div>
      </div>
      <div class="row">
        <div id="41" class="seat"></div>
        <div id="42" class="seat"></div>
        <div id="43" class="seat"></div>
        <div id="44" class="seat"></div>
        <div id="45" class="seat occupied"></div>
        <div id="46" class="seat occupied"></div>
        <div id="47" class="seat occupied"></div>
        <div id="48" class="seat"></div>
      </div>

      <p class="text">
        You have selected <span id="count">0</span> seats
        <span id="places"></span> for the total price of Usd.
        <span id="total">0</span>
      </p>
    </div>
    <a href="payment" class="animated-button1">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      Pay
    </a>
  </div>
</div>
<!-- inline javascript -->
<script>
  const container = document.querySelector('.container')
  const seats = document.querySelectorAll('.row .seat:not(.occupied)')
  const count = document.getElementById('count')
  const total = document.getElementById('total')
  const places = document.getElementById('places')
  const payBtn = document.getElementById('payBtn')

  let ticketPrice = 40;
  const placesSelected = []

  function updateSelectedCount() {
    const selectedSeats = document.querySelectorAll('.row .seat.selected');
    const selectedSeatsCount = selectedSeats.length;
    count.innerText = selectedSeatsCount;
    total.innerText = selectedSeatsCount * ticketPrice;
    places.innerText = placesSelected.length>0?"("+placesSelected+")":placesSelected
  }

  //Seat click event
  container.addEventListener('click', event => {

    if (event.target.classList.contains('seat') &&
       !event.target.classList.contains('occupied')) {
      event.target.classList.toggle('selected');
      
      if (placesSelected.includes(event.target.id)) {
          const index = placesSelected.indexOf(event.target.id);
          placesSelected.splice(index, 1);
      }
      else{
          placesSelected.push(event.target.id)
      }
    }
    updateSelectedCount();
  });

  payBtn.addEventListener('click', event=>{
    alert('')
  })
  function payBtnClick(){
      alert("Thank you for your purchase here is your sits " + placesSelected)
  }

  
</script>
<!-- <script src="../public/js/places.js"></script> -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
  crossorigin="anonymous"
></script>



<%- include('partials/footer') %>
